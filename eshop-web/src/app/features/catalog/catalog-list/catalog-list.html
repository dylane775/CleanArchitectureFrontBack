<mat-toolbar color="primary">
  <span>eShop - Product Catalog</span>
  <span class="spacer"></span>

  @if (authService.isAuthenticated()) {
    <button mat-icon-button [matBadge]="basketService.itemCount()" matBadgeColor="warn">
      <mat-icon>shopping_cart</mat-icon>
    </button>
    <span class="user-info">{{ authService.currentUser()?.email }}</span>
    <button mat-button (click)="logout()">
      <mat-icon>logout</mat-icon>
      Logout
    </button>
  } @else {
    <button mat-button routerLink="/auth/login">Login</button>
  }
</mat-toolbar>

<div class="catalog-container">
  @if (loading()) {
    <div class="loading-container">
      <mat-spinner></mat-spinner>
    </div>
  } @else {
    <div class="catalog-grid">
      @for (item of catalogItems(); track item.id) {
        <app-catalog-item
          [item]="item"
          (addToBasket)="onAddToBasket($event)">
        </app-catalog-item>
      }
    </div>

    <mat-paginator
      [length]="totalItems()"
      [pageSize]="pageSize"
      [pageIndex]="pageIndex"
      [pageSizeOptions]="[5, 10, 25, 50]"
      (page)="onPageChange($event)"
      aria-label="Select page">
    </mat-paginator>
  }
</div>
